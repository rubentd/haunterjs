{
  "name": "haunterjs",
  "tagline": "CSS regression testing tool focused on simplicity",
  "body": "![logo](http://rubentd.com/haunterjs/img/icon.png \"logo\") \r\n# haunterjs\r\n[![npm version](https://badge.fury.io/js/haunterjs.svg)](http://badge.fury.io/js/haunterjs) [![Build Status](https://travis-ci.org/rubentd/haunterjs.svg)](https://travis-ci.org/rubentd/haunterjs)\r\n\r\n## Table of Contents\r\n* [About haunterjs](#about-haunterjs)\r\n* [Taking snaps](#taking-snaps)\r\n* [Responsive sites](#responsive-sites)\r\n* [Snap viewer](#snap-viewer)\r\n* [Solving conflicts](#solving-conflicts)\r\n* [API documentation](#api-documentation)\r\n* [Installation](#installation)\r\n* [Best practices](#best-practices)\r\n\r\n\r\n## About haunterjs\r\nWhen you work on a big website or web application, you (and maybe a bunch of people) are constantly introducing changes in the visual components.  \r\nSometimes this changes are intentional, as you are improving the look and feel, or adding new features, but sometimes this changes are introduced by mistake.   \r\nImagine you are refactoring some component, for example a button, but you are not sure how this change is gonna impact the site. You would need to browse the whole site to make sure everything looks good.  \r\nWith css regression tests you can automate the process, and make sure none breaks the styles across the website.\r\n<br>\r\nThere are some tools like [PhantomCSS](https://github.com/huddle/phantomcss) \r\nor [wraith](https://github.com/BBC-News/wraith) \r\nwhich allow you to write tests to compare screenshots of your website and detect changes.\r\n  \r\n<br>\r\nhaunterjs was built on top of [PhantomCSS](https://github.com/huddle/phantomcss), \r\nadding some new features:\r\n\r\n1. Annotations for each screenshot\r\n2. Sense of ordered steps in the execution of the test\r\n3. More simplicity in the syntax for the tests\r\n4. A viewer to compare and choose the correct screenshots\r\n\r\n\r\nhaunterjs masks some complex features of casperjs, allowing to code simple tests, with a more compact and readable syntax.\r\n\r\nThis example test opens github.com and searches for 'bootstrap'\r\n\r\n```javascript\r\nvar haunter = require('../haunter.js');\r\nhaunter.start('search/bootstrap', 'Search for bootstrap repo');\r\nhaunter.goToUrl('https://github.com/');\r\nhaunter.snap('.header', 'Go to github.com');\r\nhaunter.sendKeys('input[type=text]', 'bootstrap');\r\nhaunter.snap('.header', 'Type bootstrap on the search field');\r\nhaunter.pressEnter('input[type=text]');\r\nhaunter.snap('.sort-bar', 'Press enter and view number of results');\r\nhaunter.end();\r\n```\r\n\r\n<br>\r\n## Taking snaps\r\n\r\nhaunterjs is based on the concept of **snaps**.\r\n\r\nA snap is a screenshot of a given css selector and an annotation for that screenshot, describing the current action being performed. \r\n\r\n```javascript\r\nhaunter.snap('.sort-bar', 'Press enter and view number of results');\r\n```\r\n\r\n  \r\n<br>\r\n## Responsive sites\r\n\r\nhaunterjs allows to configure multiple viewports, to test responsive sites in a single test.  \r\nThis way haunterjs will take screenshots with every screen size in each snap.\r\n\r\n```javascript\r\nconfig.defaultViewports = [\r\n\t{ \r\n\t\tname: 'small',\r\n\t\twidth: 320, \r\n\t\theight: 480\r\n\t},\r\n\t{ \r\n\t\tname: 'medium',\r\n\t\twidth: 768, \r\n\t\theight: 480\r\n\t},\r\n\t{ \r\n\t\tname: 'large',\r\n\t\twidth: 1024, \r\n\t\theight: 768\r\n\t}\r\n];\r\n```\r\n\r\nIf you want to take a snap of a single component, like a button, and you don't care about multiple screen sizes, call the snap method with the last parameter with false value.\r\n\r\n```javascript\r\nhaunter.snap('.selector', 'Annotation', false);\r\n```\r\n\r\n\r\n<br>\r\n## Snap viewer\r\n\r\nhaunterjs includes a snap viewer written in nodejs and angularjs. You can use this tool as a navigation manual, browsing the snapshots of a specific user flow. You can compare them and choose the correct one, in the event of conflict.\r\n\r\n<br><br>\r\n![snap viewer](http://rubentd.com/haunterjs/img/viewer-index.png \"snap viewer\")\r\n<br><br>\r\n\r\nhaunterjs allows the test to be structured in a hierarchy or folder system, to facilitate the process of browsing/running the tests.\r\nFor example you can separate your tests by features or modules of your website.\r\n\r\nThis *virtual path* is setup in each test:\r\n\r\n```javascript\r\nhaunter.start('search/bootstrap', 'Search for bootstrap repo');\r\n```\r\n\r\n<br>\r\n## Solving conflicts\r\n\r\nWhen a conflict it's found, the viewer asks you which one is the correct version of that component.\r\n\r\n<br><br>\r\n![snap viewer](http://rubentd.com/haunterjs/img/conflict.gif \"snap viewer\")\r\n<br><br>\r\n\r\nSo you can update the baseline screenshot, or fix possible visual inconsistencies.\r\n\r\n<br><br>\r\n![snap viewer](http://rubentd.com/haunterjs/img/choose-correct.png \"snap viewer\")\r\n<br><br>\r\n\r\nAfter solving the conflicts, you must commit the changes in your repo.\r\n\r\n\r\n<br>\r\n## API Documentation\r\n\r\n####`haunter.start(hierarchy, description)`\r\nInitialize components needed to run the test  \r\n*Parameters*  \r\n    `hierarchy {String}` A virtual path to organize the test  \r\n    `description {String}` Description of the test\r\n___\r\n\r\n####`haunter.setViewports(viewports)`\r\nSets viewport dimensions for the test. Setup the viewport after calling the method start()  \r\n*Parameters*  \r\n    `viewports {Array}` Array of desired viewports. Each viewport has name, width and height)\r\n___\r\n\r\n####`haunter.setUserAgent(ua)`\r\nSets user agent for the test  \r\n*Parameters*  \r\n    `ua {String}` User Agent string\r\n___\r\n\r\n####`haunter.goToUrl(url)`\r\nNavigate to that url  \r\n*Parameters*  \r\n    `url {String}` Destination url\r\n___\r\n\r\n####`haunter.snap(cssSelector, annotation, multiple)`\r\nTake a screenshot with an annotation  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector of the element to capture  \r\n    `annotation {String}` Comment for the screnshot\r\n    `multiple {boolean}` Take screenshot in all the viewports?\r\n___\r\n\r\n####`haunter.snapExcluding(cssSelector, excludeSelector, annotation, multiple)`\r\nTake a screenshot excluding an element  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector of the element to capture  \r\n    `excludeSelector {String}` CSS selector of the element to exclude  \r\n    `annotation {String}` Comment for the screnshot\r\n    `multiple {boolean}` Take screenshot in all the viewports?\r\n___\r\n\r\n####`haunter.click(cssSelector)`\r\nClick an element  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector of the element to click\r\n___\r\n\r\n####`haunter.sendKeys(cssSelector, keys)`\r\nType some text into an element  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector of the element to send keys to  \r\n    `keys {String}` String of text to input in the element\r\n___\r\n\r\n####`haunter.pressEnter(cssSelector)`\r\nPress enter key while focused on an element  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector of the element to focus\r\n___\r\n\r\n####`haunter.mouseover(cssSelector)`\r\nPlace the mouse over some element  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector of the element to mouseover\r\n___\r\n\r\n####`haunter.uploadFile(cssSelector, filePath)`\r\nUpload a file to the browser  \r\n*Parameters*  \r\n    `cssSelector {String}` CSS selector for the file input\r\n    `filePath {String}` Path to the file to upload\r\n___\r\n\r\n####`haunter.evaluate(actions, params)`\r\nEvaluate some js code on the browser\r\n*Parameters*  \r\n    `actions {function}` JavaScript code to evaluate\r\n    `params {Object}` Params for the js evaluation\r\n___\r\n\r\n####`haunter.wait()`\r\nWait some time in ms. Masks casperjs wait\r\n*Parameters*  \r\n    `miliseconds {Number}` Time in miliseconds to wait\r\n___\r\n\r\n####`haunter.end()`\r\nProceed to compare the screenshots and figure out if there are errors\r\n___\r\n\r\n\r\n## Installation\r\n\r\nhaunterjs is available as a node package\r\n\r\n```\r\nnpm install haunterjs\r\n```\r\n<br>\r\n\r\nStart by setting up your configuration on the *config.js* file. Or just leave all the values by default.\r\nMake sure the *viewerPort* configured in the config.js file matches the one in *www/js/app.js*\r\n\r\nRun the demo tests with:\r\n```\r\ncasperjs test demo-tests\r\n```\r\n\r\nRun the snap viewer with: \r\n```\r\nnpm start\r\n```\r\nAnd then open http://localhost:[viewerPort] in your browser  \r\n\r\n\r\n## Best practices\r\n\r\n### Organize tests  \r\nUsing a tidy hierarchization, you can sort them by features, or modules within your webapp.  \r\n\r\n\r\n### Take a look at [PhantomCSS best practices](https://github.com/Huddle/PhantomCSS#best-practices)   \r\nWhich I will summarize here:  \r\n* Try not to use complex CSS3 selectors for asserting or creating screenshots. Prefer ids.\r\n* Do not use these as a replacement for functional tests\r\n* Don't try to test all the visuals\r\n* Full page screenshots are a bad idea\r\n",
  "google": "UA-62906708-1",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}